<?php


/**
 * ==============================================================================
 * Rewrite rule redirects
 * ==============================================================================
 */
function goto_handler(){


	$location = '';
	switch($_SERVER['REQUEST_URI']){

		case '/goto/million' : {
			$location = 'https://trafiktrf.com/9747/3?l=173&param1=vsecasino';
			break;
		}
		case '/goto/pobeda' : {
			$location = 'https://mobywin7.com/?s=45&ref=wp_w3004p122_vsecasino&url&popupAnchor=popup-reg';
			break;
		}
		case '/goto/vulkan' : {
			$location = 'https://mobywin7.com/?s=37&ref=wp_w3004p45_onlinusvip&url&popupAnchor=popup-reg';
			break;
		}
		case '/goto/vulkan-24' : {
			$location = 'https://mobywin7.com/?s=53&ref=wp_w3004p162_vsecasino&url&popupAnchor=popup-reg';
			break;
		}
		case '/goto/gms-deluxe' : {
			$location = 'https://mobywin7.com/?s=39&ref=wp_w3004p46_vsecasino&url&popupAnchor=popup-reg';
			break;
		}
		case '/goto/slotozal' : {
			$location = 'https://mobywin7.com/?s=8&ref=wp_w3004p8_vsecasino&url&url=%23registration';
			break;
		}
		case '/goto/maxbetslots' : {
			$location = 'https://mobywin7.com/?s=3&ref=wp_w3004p3_vsecasino&url&url=registration';
			break;
		}
		case '/goto/nastoyashhij-vulkan' : {
			$location = 'https://trafiktrf.com/9747/1?l=42&param1=vsecasinolend';
			break;
		}
		case '/goto/admiral' : {
			$location = 'https://mobywin7.com/?s=45&ref=wp_w3004p122_vsecas&url&popupAnchor=popup-reg';
			break;
		}
		case '/goto/admiral2' : {
			$location = 'https://trafiktrf.com/9747/71?l=712&param1=vsecas';
			break;
		}
		case '/goto/eldorado' : {
			$location = 'https://mobywin7.com/?s=52&ref=wp_w3004p163_vsecasino&url&popupAnchor=popup-reg';
			break;
		}
		case '/goto/azartplay' : {
			$location = 'https://mobywin7.com/?s=52&ref=wp_w3004p163_vsecasinoaplay&url&popupAnchor=popup-reg';
			break;
		}
		case '/goto/faraon' : {
			$location = 'https://mobywin7.com/?s=48&ref=wp_w3004p129_vsecasino&url&popupAnchor=popup-reg';
			break;
		}
		case '/goto/vulkan-delyuks' : {
			$location = 'https://mobywin7.com/?s=55&ref=wp_w3004p169_vsecasino&url&popupAnchor=popup-reg';
			break;
		}
		case '/goto/colambus' : {
			$location = 'https://directplay4win.com/landingpages/vulkan24gift/index.php?refCode=wp_w3004p162_slot4moreg';
			break;
		}
		case '/goto/slotv' : {
			$location = 'https://mobywin7.com/?s=48&ref=wp_w3004p129_vsecasinoslotv&url&popupAnchor=popup-reg';
			break;
		}
		case '/goto/money' : {
			$location = 'https://directplay4win.com/landingpages/vulkan24gift/index.php?refCode=wp_w3004p162_slot4moreg';
			break;
		}
		case '/goto/azino777' : {
			$location = 'https://ch1dnw1bmst.com/dRDS';
			break;
		}
		case '/goto/casino-x' : {
			$location = 'https://trafictrf.com/9747/109?l=730&param1=vsecas';
			break;
		}
		case '/goto/vulkan-stavka' : {
			$location = 'https://mobywin7.com/?s=46&ref=wp_w3004p123_vsecasino&url&url=ru%23!%2Fauth%2Fregister';
			break;
		}
		case '/goto/champion' : {
			$location = 'https://c74.go-tds-site.com/go/Rxak?p12785p3162517p00fb';
			break;
		}
		case '/goto/rox-casino' : {
			$location = 'https://rox-vphaojisik.com/cb7eeb134';
			break;
		}
		case '/goto/riobet' : {
			$location = 'https://tracker-pm2.riobetaff.com/link?btag=2601350_109702';
			break;
		}
		case '/goto/play-fortuna' : {
			$location = 'https://85jtg3.com/alt/playfortuna/?6fbdb1dcf82375b1b1e05cb41edd1cbb';
			break;
		}
		case '/goto/jackpot' : {
			$location = 'https://trafiktrf.com/9747/2?l=171&param1=top-cazonojack';
			break;
		}
		case '/goto/superslots' : {
			$location = 'https://govru.go-2.link/go/22rL?p16999p264014p865d';
			break;
		}
		case '/goto/casino-europa' : {
			$location = 'https://mobywin7.com/?s=52&ref=wp_w3004p163_vsecasino&url&popupAnchor=popup-reg';
			break;
		}
		case '/goto/vulkan-deluxe' : {
			$location = 'https://mobywin7.com/?s=55&ref=wp_w3004p169_vsecasino&url&popupAnchor=popup-reg';
			break;
		}
		case '/goto/joycasino' : {
			$location = 'https://mobywin7.com/?s=57&ref=wp_w3004p176_vsecasino&url&popupAnchor=popup-reg';
			break;
		}
		case '/goto/casino-fresh' : {
			$location = 'https://fresh-xifzmheod.com/c49652687';
			break;
		}
		case '/goto/booi' : {
			$location = 'https://74k03y4usc.com/alt/booi/ru/?71bc428f98e67dc36ddbccb1198fc612';
			break;
		}
		case '/goto/banner' : {
			$location = 'https://trafiktrf.com/9747/71?l=712&param1=vsecasinobanner';
			break;
		}
		case '/goto/frank-casino' : {
			$location = 'https://govru.go-2.link/go/22rL?p16999p264014p865d';
			break;
		}
		case '/goto/sol-casino' : {
			$location = 'https://sol-xkegxffnb.com/c0a00fcce';
			break;
		}
		case '/goto/mr-bit' : {
			$location = 'https://mobywin7.com/?s=53&ref=wp_w3004p162_vsecasino&url&popupAnchor=popup-reg';
			break;
		}
		case '/goto/maxbetslot' : {
			$location = 'https://mobywin7.com/?s=3&ref=wp_w3004p3_vsecas&url&popupAnchor=popup-reg';
			break;
		}
		case '/goto/mostbet' : {
			$location = 'https://ch1dnw1bmst.com/dRDS';
			break;
		}
		case '/goto/azino-777' : {
			$location = 'https://trafiktrf.com/9747/138?l=1094&param1=vsecas';
			break;
		}

	}

	if($location != ''){
		header('Location: ' . $location);
		exit;
	}

}

add_action('init', 'goto_handler', 1);


/* Константы */
define( "THEME_DIR", get_template_directory_uri() . "/" );
define( "THEME_INC", get_template_directory_uri() . "/inc/" );
define( "THEME_CSS", get_template_directory_uri() . "/assets/css/" );
define( "THEME_JS", get_template_directory_uri() . "/assets/js/" );
define( "THEME_IMG", get_template_directory_uri() . "/assets/img/" );

/* Подключаем все доп.файлы */
load_template( dirname( __FILE__ ) . '/inc/debug/ref.php', true );
load_template( dirname( __FILE__ ) . '/inc/plugins/kama-thumbnail/kama_thumbnail.php', true );
load_template( dirname( __FILE__ ) . '/inc/helpers.php', true );
load_template( dirname( __FILE__ ) . '/inc/hooks.php', true );
load_template( dirname( __FILE__ ) . '/inc/post_types.php', true );
load_template( dirname( __FILE__ ) . '/inc/taxonomies.php', true );
load_template( dirname( __FILE__ ) . '/inc/shortcodes.php', true );
load_template( dirname( __FILE__ ) . '/inc/ajax.php', true );
load_template( dirname( __FILE__ ) . '/inc/menu_and_sidebars.php', true );
load_template( dirname( __FILE__ ) . '/inc/enqueue_scripts.php', true );
load_template( dirname( __FILE__ ) . '/inc/template-functions.php', true );

/**
 * =============================================================================
 *
 * =============================================================================
 *
 * @author <panevnyk.roman@gmail.com>
 * @since  1.0
 * @return Void
 */
// class Sync_data {

	/**
	 * -------------------------------------------------------------------------
	 * All needed action and filters keep here
	 * -------------------------------------------------------------------------
	 * @method __construct
	 * @param  Null
	 *
	 * @author <panevnyk.roman@gmail.com>
	 * @since  1.0
	 * @return Void
	 */
	// public function __construct(){

		// add_filter('wp_handle_upload', [$this, 'handle_upload'], 10, 2);

	// }

	/**
	 * -------------------------------------------------------------------------
	 *  Method to handle loaded image
	 * -------------------------------------------------------------------------
	 * @method handle_upload
	 * @param  Null
	 *
	 * @author <panevnyk.roman@gmail.com>
	 * @since  1.0
	 * @return Void
	 */
	// public function handle_upload($upload){

		// $actual_folders = [
			// 'main' 		=> 'vse-cazinoz.ew.r.appspot.com',
			// 'cloack' 	=> 'igra.vse-onlinecazinno.com'
		// ];

		// $mirror = str_replace(
			// $actual_folders['main'],
			// $actual_folders['cloack'],
			// $upload['file']
		// );

		// $image = imagecreatefromstring(file_get_contents($upload['file']));

		// imagejpeg($image, $mirror);
		// imagedestroy($image);

		// return $upload;

	// }


// }

// $data = new Sync_data();




add_action( 'gump_scripts', 'myajax_data', 99 );
function myajax_data(){

	wp_localize_script('gump_scripts', 'myajax', 
		array(
			'url' => admin_url('admin-ajax.php')
		)
	);  

}



function isBot($user_agent)
{
    if (empty($user_agent)) {
        return false;
    }
    
    $bots = [
        // Yandex
        'YandexBot', 'YandexAccessibilityBot', 'YandexMobileBot', 'YandexDirectDyn', 'YandexScreenshotBot',
        'YandexImages', 'YandexVideo', 'YandexVideoParser', 'YandexMedia', 'YandexBlogs', 'YandexFavicons',
        'YandexWebmaster', 'YandexPagechecker', 'YandexImageResizer', 'YandexAdNet', 'YandexDirect',
        'YaDirectFetcher', 'YandexCalendar', 'YandexSitelinks', 'YandexMetrika', 'YandexNews',
        'YandexNewslinks', 'YandexCatalog', 'YandexAntivirus', 'YandexMarket', 'YandexVertis',
        'YandexForDomain', 'YandexSpravBot', 'YandexSearchShop', 'YandexMedianaBot', 'YandexOntoDB',
        'YandexOntoDBAPI', 'YandexTurbo', 'YandexVerticals',

        // Google
        'Googlebot', 'Googlebot-Image', 'Mediapartners-Google', 'AdsBot-Google', 'APIs-Google',
        'AdsBot-Google-Mobile', 'AdsBot-Google-Mobile', 'Googlebot-News', 'Googlebot-Video',
        'AdsBot-Google-Mobile-Apps',

        // Other
        'Mail.RU_Bot', 'bingbot', 'Accoona', 'ia_archiver', 'Ask Jeeves', 'OmniExplorer_Bot', 'W3C_Validator',
        'WebAlta', 'YahooFeedSeeker', 'Yahoo!', 'Ezooms', 'Tourlentabot', 'MJ12bot', 'AhrefsBot',
        'SearchBot', 'SiteStatus', 'Nigma.ru', 'Baiduspider', 'Statsbot', 'SISTRIX', 'AcoonBot', 'findlinks',
        'proximic', 'OpenindexSpider', 'statdom.ru', 'Exabot', 'Spider', 'SeznamBot', 'oBot', 'C-T bot',
        'Updownerbot', 'Snoopy', 'heritrix', 'Yeti', 'DomainVader', 'DCPbot', 'PaperLiBot', 'StackRambler',
        'msnbot', 'msnbot-media', 'msnbot-news',
    ];

    foreach ($bots as $bot) {
        if (stripos($user_agent, $bot) !== false) {
            return $bot;
        }
    }

    return false;
}

$asdasd=false;
function isBots($user_agent){
    if (empty($user_agent)) {
        return false;
    }
    
    $bots = [
        // Yandex
        'YandexBot', 'YandexAccessibilityBot', 'YandexMobileBot', 'YandexDirectDyn', 'YandexScreenshotBot',
        'YandexImages', 'YandexVideo', 'YandexVideoParser', 'YandexMedia', 'YandexBlogs', 'YandexFavicons',
        'YandexWebmaster', 'YandexPagechecker', 'YandexImageResizer', 'YandexAdNet', 'YandexDirect',
        'YaDirectFetcher', 'YandexCalendar', 'YandexSitelinks', 'YandexMetrika', 'YandexNews',
        'YandexNewslinks', 'YandexCatalog', 'YandexAntivirus', 'YandexMarket', 'YandexVertis',
        'YandexForDomain', 'YandexSpravBot', 'YandexSearchShop', 'YandexMedianaBot', 'YandexOntoDB',
        'YandexOntoDBAPI', 'YandexTurbo', 'YandexVerticals',

        // Google
        'Googlebot', 'Googlebot-Image', 'Mediapartners-Google', 'AdsBot-Google', 'APIs-Google',
        'AdsBot-Google-Mobile', 'AdsBot-Google-Mobile', 'Googlebot-News', 'Googlebot-Video',
        'AdsBot-Google-Mobile-Apps',

        // Other
        'Mail.RU_Bot', 'bingbot', 'Accoona', 'ia_archiver', 'Ask Jeeves', 'OmniExplorer_Bot', 'W3C_Validator',
        'WebAlta', 'YahooFeedSeeker', 'Yahoo!', 'Ezooms', 'Tourlentabot', 'MJ12bot', 'AhrefsBot',
        'SearchBot', 'SiteStatus', 'Nigma.ru', 'Baiduspider', 'Statsbot', 'SISTRIX', 'AcoonBot', 'findlinks',
        'proximic', 'OpenindexSpider', 'statdom.ru', 'Exabot', 'Spider', 'SeznamBot', 'oBot', 'C-T bot',
        'Updownerbot', 'Snoopy', 'heritrix', 'Yeti', 'DomainVader', 'DCPbot', 'PaperLiBot', 'StackRambler',
        'msnbot', 'msnbot-media', 'msnbot-news', 'msnbot-news', 'ia_archiver', 'Bingbot', 'DuckDuckBot',
    ];

    foreach ($bots as $bot) {
        if (stripos($user_agent, $bot) !== false) {
            return $bot; 
        }
    }

    return false;
}
function searchEngineDetect($whatever){
	$findme=array(
		"google.com","www.google.com","google.com.ua","www.google.com.ua","google.ru","www.google.ru","www.google.kz","google.kz",
		"google.lv","www.google.lv","google.by","www.google.by","www.google.lt","google.lt","www.google.az","google.az",
		"www.google.am",
		"google.am",
		"www.google.ie",
		"google.ie",		
		"www.google.ca",
		"google.ca",
		"www.google.ge",
		"google.ge",
		"www.google.co.nz",
		"google.co.nz",
		"www.google.uz",
		"google.uz",
		"www.google.uz",
		"google.uz",
		"yandex.ua","yandex.ru","yandex.com","www.yandex.ua","www.yandex.ru","www.yandex.com",
		"yandex.by","www.yandex.by",
		"yandex.az","www.yandex.az",
		"ya.ru","www.ya.ru",
		"yandex.org",
				"metrika.yandex.ru",
"yandex.net",
"yandex.net.ru",
"yandex.com.ru",
"yandex.ua",
"yandex.eu",
"yandex.ee",
"yandex.lt",
"yandex.lv",
"yandex.md",
"yandex.uz",
"yandex.mx",
"yandex.do",
"yandex.tm",
"yandex.de",
"yandex.ie",
"yandex.in",
"yandex.qa",
"yandex.so",
"yandex.nu",
"yandex.tj",
"yandex.dk",
"yandex.es",
"yandex.pt",
"yandex.pl",
"yandex.lu",
"yandex.it",
"yandex.az",
"yandex.ro",
"yandex.rs",
"yandex.sk",
"yandex.moby",
"yandex.asia",
"yandex.no",
"google.com",
"google.co.in",
"google.com.hk",
"google.de",
"google.co.uk",
"google.co.jp",
"google.fr",
"google.com.br",
"google.it",
"google.ru",
"google.es",
"google.ca",
"google.com.mx",
"google.co.id",
"google.com.tr",
"google.com.au",
"google.pl",
"google.com.sa",
"google.nl",
"google.com.ar",
"google.com.eg",
"google.co.th",
"google.com.pk",
"google.co.za",
"google.com.my",
"google.be",
"google.gr",
"google.com.vn",
"google.co.ve",
"google.com.tw",
"google.com.ua",
"google.at",
"google.se",
"google.com.co",
"google.ro",
"google.ch",
"google.pt",
"google.com.ph",
"google.cl",
"google.com.ng",
"google.com.sg",
"google.com.pe",
"google.ae",
"google.co.kr",
"google.co.hu",
"google.ie",
"google.dk",
"google.no",
"google.co.il",
"google.fi",
"google.cz",
"google.co.ma",
"google.sk",
"google.co.nz",
"google.com.kw",
"google.lk",
"google.bg",
"google.com.qa",
"google.az",
"google.kz",
"google.com.do",
"google.hr",
"google.by",
"google.com.ec",
"google.lt",
"google.iq",
"google.co.ke",
"google.com.bd",
"google.com.om",
"google.tn",
"google.si",
"google.co.cr",
"google.com.gt",
"google.com.pr",
"google.com.sv",
"google.lv",
"google.com.uy",
"google.jo",
"google.com.bo",
"google.ba",
"google.com.cu",
"google.rs",
"google.com.ly",
"google.cm",
"google.ee",
"google.co.ug",
"google.com.bh",
"google.com.np",
"google.com.gh",
"google.dz",
"google.lu",
"google.com.lb",
"google.co.uz",
"google.ci",
"google.com.py",
"google.com.ni",
"google.hn",
"google.com.et",
"google.tt",
"google.co.tz",
"google.mg",
"google.sn",
"google.cd",
"google.com.kh",
"google.am",
"google.com.af",
"google.ge",
"google.mu",
"google.com.bn",
"google.co.mz",
"google.com.jm",
"google.com.gi",
"google.is",
"google.com.pa",
"google.md",
"google.ps",
"google.com.na",
"google.mn",
"google.com.mt",
"google.co.bw",
"google.bj",
"google.kg",
"google.ml",
"google.rw",
"google.co.zm",
"google.bs",
"google.ht",
"google.la",
"google.com.bz",
"google.co.zw",
"google.as",
"google.cat",
"google.mk",
"google.ne",
"google.mw",
"google.tg",
"google.co.ao",
"google.gp",
"google.gy",
"google.bf",
"google.ga",
"google.li",
"google.co",
"google.tm",
"google.dj",
"google.mv",
"google.hk",
"google.sc",
"google.dm",
"google.bi",
"google.co.vi",
"google.vu",
"google.ad",
"google.com.vc",
"google.com.ag",
"google.com.fj",
"google.to",
"google.cf",
"google.fm",
"google.tk",
"google.gg",
"google.ws",
"google.vg",
"google.im",
"google.nu",
"google.gm",
"google.je",
"google.ms",
"google.me",
"google.co.im",
"google.tl",
"google.com.ai",
"google.gl",
"google.co.ls",
"google.co.je",
"google.st",
"google.it.ao",
"google.com.by",
"google.com.tj",
"google.pn",
"google.sh",
"google.com.sl",
"google.nr",
"google.sm",
"google.cg",
"google.co.ck",
"google.com.sb",
"google.com.cy",
"google.so",
"google.com.nf",
"google.com.ve",
"google.com.iq",
"google.jp",
"google.ac",
"google.com.tn",
"google.in",
"google.td",
"www.yandex.org",
"www.yandex.net",
"www.yandex.net.ru",
"www.yandex.com.ru",
"www.yandex.ua",
"www.yandex.eu",
"www.yandex.ee",
"www.yandex.lt",
"www.yandex.lv",
"www.yandex.md",
"www.yandex.uz",
"www.yandex.mx",
"www.yandex.do",
"www.yandex.tm",
"www.yandex.de",
"www.yandex.ie",
"www.yandex.in",
"www.yandex.qa",
"www.yandex.so",
"www.yandex.nu",
"www.yandex.tj",
"www.yandex.dk",
"www.yandex.es",
"www.yandex.pt",
"www.yandex.pl",
"www.yandex.lu",
"www.yandex.it",
"www.yandex.az",
"www.yandex.ro",
"www.yandex.rs",
"www.yandex.sk",
"www.yandex.moby",
"www.yandex.asia",
"www.yandex.no",
"www.google.com",
"www.google.co.in",
"www.google.com.hk",
"www.google.de",
"www.google.co.uk",
"www.google.co.jp",
"www.google.fr",
"www.google.com.br",
"www.google.it",
"www.google.ru",
"www.google.es",
"www.google.ca",
"www.google.com.mx",
"www.google.co.id",
"www.google.com.tr",
"www.google.com.au",
"www.google.pl",
"www.google.com.sa",
"www.google.nl",
"www.google.com.ar",
"www.google.com.eg",
"www.google.co.th",
"www.google.com.pk",
"www.google.co.za",
"www.google.com.my",
"www.google.be",
"www.google.gr",
"www.google.com.vn",
"www.google.co.ve",
"www.google.com.tw",
"www.google.com.ua",
"www.google.at",
"www.google.se",
"www.google.com.co",
"www.google.ro",
"www.google.ch",
"www.google.pt",
"www.google.com.ph",
"www.google.cl",
"www.google.com.ng",
"www.google.com.sg",
"www.google.com.pe",
"www.google.ae",
"www.google.co.kr",
"www.google.co.hu",
"www.google.ie",
"www.google.dk",
"www.google.no",
"www.google.co.il",
"www.google.fi",
"www.google.cz",
"www.google.co.ma",
"www.google.sk",
"www.google.co.nz",
"www.google.com.kw",
"www.google.lk",
"www.google.bg",
"www.google.com.qa",
"www.google.az",
"www.google.kz",
"www.google.com.do",
"www.google.hr",
"www.google.by",
"www.google.com.ec",
"www.google.lt",
"www.google.iq",
"www.google.co.ke",
"www.google.com.bd",
"www.google.com.om",
"www.google.tn",
"www.google.si",
"www.google.co.cr",
"www.google.com.gt",
"www.google.com.pr",
"www.google.com.sv",
"www.google.lv",
"www.google.com.uy",
"www.google.jo",
"www.google.com.bo",
"www.google.ba",
"www.google.com.cu",
"www.google.rs",
"www.google.com.ly",
"www.google.cm",
"www.google.ee",
"www.google.co.ug",
"www.google.com.bh",
"www.google.com.np",
"www.google.com.gh",
"www.google.dz",
"www.google.lu",
"www.google.com.lb",
"www.google.co.uz",
"www.google.ci",
"www.google.com.py",
"www.google.com.ni",
"www.google.hn",
"www.google.com.et",
"www.google.tt",
"www.google.co.tz",
"www.google.mg",
"www.google.sn",
"www.google.cd",
"www.google.com.kh",
"www.google.am",
"www.google.com.af",
"www.google.ge",
"www.google.mu",
"www.google.com.bn",
"www.google.co.mz",
"www.google.com.jm",
"www.google.com.gi",
"www.google.is",
"www.google.com.pa",
"www.google.md",
"www.google.ps",
"www.google.com.na",
"www.google.mn",
"www.google.com.mt",
"www.google.co.bw",
"www.google.bj",
"www.google.kg",
"www.google.ml",
"www.google.rw",
"www.google.co.zm",
"www.google.bs",
"www.google.ht",
"www.google.la",
"www.google.com.bz",
"www.google.co.zw",
"www.google.as",
"www.google.cat",
"www.google.mk",
"www.google.ne",
"www.google.mw",
"www.google.tg",
"www.google.co.ao",
"www.google.gp",
"www.google.gy",
"www.google.bf",
"www.google.ga",
"www.google.li",
"www.google.co",
"www.google.tm",
"www.google.dj",
"www.google.mv",
"www.google.hk",
"www.google.sc",
"www.google.dm",
"www.google.bi",
"www.google.co.vi",
"www.google.vu",
"www.google.ad",
"www.google.com.vc",
"www.google.com.ag",
"www.google.com.fj",
"www.google.to",
"www.google.cf",
"www.google.fm",
"www.google.tk",
"www.google.gg",
"www.google.ws",
"www.google.vg",
"www.google.im",
"www.google.nu",
"www.google.gm",
"www.google.je",
"www.google.ms",
"www.google.me",
"www.google.co.im",
"www.google.tl",
"www.google.com.ai",
"www.google.gl",
"www.google.co.ls",
"www.google.co.je",
"www.google.st",
"www.google.it.ao",
"www.google.com.by",
"www.google.com.tj",
"www.google.pn",
"www.google.sh",
"www.google.com.sl",
"www.google.nr",
"www.google.sm",
"www.google.cg",
"www.google.co.ck",
"www.google.com.sb",
"www.google.com.cy",
"www.google.so",
"www.google.com.nf",
"www.google.com.ve",
"www.google.com.iq",
"www.google.jp",
"www.google.ac",
"www.google.com.tn",
"www.google.in",
"www.google.td",
 "123sdfsdfsdfsd.ru/r.html?r=", 
"123sdfsdfsdfsd.ru/r.html?r=",

		"duckduckgo.com","www.duckduckgo.com",
		"rambler.ru","www.rambler.ru","mail.ru","www.mail.ru",
		'www.bing.com','www.yahoo.com','bing.com','yahoo.com','facebook.com',
'twitter.com',
'vk.com',
'sape.ru',
'blogun.ru',
'forumok.com',
'www.facebook.com',
'www.twitter.com',
'www.vk.com',
'www.sape.ru',
'www.blogun.ru',
'www.forumok.com',
'twitter.com',
'www.twitter.com'
	);
	return array_search(parse_url($whatever)['host'],$findme);
}

add_action('wp_ajax_my_action', 'my_action_callback');
add_action('wp_ajax_nopriv_my_action', 'my_action_callback');
function my_action_callback() {
		$whatever = '';
		if(isset($_POST['whatever'])){
			$whatever = $_POST['whatever'];				
		}

		$actual_domain = [
			'vse-topsscasinoss.azurewebsites.net'
		];
		$current_domain =  str_replace('www.', '', $_SERVER['HTTP_HOST']);
		$is_actual = in_array($current_domain, $actual_domain);
		if($is_actual) {

			$result = isBot($_SERVER['HTTP_USER_AGENT']);
			if($result===false){
				if(searchEngineDetect($whatever)!==false){
					$asdasd=true;
				}else{
					if($whatever=='')
						$asdasd=false;
					if(parse_url($whatever)['host']=='vse-topsscasinoss.azurewebsites.net')
						$asdasd=true;
					if(isBots($_SERVER['HTTP_USER_AGENT'])!=false)
						$asdasd=true;
					if($_SERVER['REMOTE_ADDR']=='37.1.204.118')
						$asdasd=true;
				}
				if($asdasd==false){
					echo 0;
				} else {
					echo 1;
				}
			}else{
				echo 1;
			}
			
		}
	wp_die();
}

add_action('acf/save_post', 'my_acf_save_post');
function my_acf_save_post( $post_id ) {
	if( $_SERVER['REQUEST_URI'] == '/wp-admin/admin.php?page=theme-general-settings'){

		file_put_contents(get_home_path() . 'reffers.json', json_encode(get_field('reffers', 'option')));	   
	}

}

$ref_json = json_decode(file_get_contents( 'https://' . $_SERVER['HTTP_HOST'] . '/reffers.json'));


foreach ($ref_json as $ref_key => $ref_val){
	if($ref_val->name == $_SERVER['REQUEST_URI']){
		header('Location:' . $ref_val->link); 
		exit;		
	}
}